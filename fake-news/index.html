<!doctype html>
<html lang="en">
<head>
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <meta charset="utf-8">
    <title>Fake News Network — War is Peace</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        /* === Self-hosted BLACKLETTER TITLE FONT === */

        @font-face {
            font-family: 'Chomsky';
            src: url('../fonts/Chomsky.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
        }

        @font-face {
            font-family: 'Junicode';
            src: url('../fonts/Junicode-Regular.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
        }

        @font-face {
            font-family: 'Junicode';
            src: url('../fonts/Junicode-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
        }

        :root {
            --overlay: rgba(0, 0, 0, 0.25);
            --card-bg: rgba(15, 23, 42, 0.35);
            --card-border: rgba(255,255,255,0.2);
            --text: #e5e7eb;
            --muted: #cbd5e1;
            --accent: #22c55e;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: Junicode, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            min-height: 100vh;
            color: var(--text);
            cursor: url("../sprites/Ojitos.png") 16 16, auto; /* custom eyes cursor */
        }

        /* Background image */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: url("../backgrounds/BroGarf.png") center center / cover no-repeat fixed;
            z-index: -2;
        }

        body::after {
            content: "";
            position: fixed;
            inset: 0;
            background: var(--overlay);
            z-index: -1;
        }

        /* Header */
        header {
            /* not sticky so you can scroll past it */
            backdrop-filter: blur(1px);
            z-index: 20;
        }

        .top-bar {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0.75rem 1.25rem 0.5rem;
        }

        .banner {
            margin: 0 auto;
            padding: 0.75rem 1.5rem;
            border-radius: 1.25rem 1.25rem 0.75rem 0.75rem;
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-bottom: none;
            box-shadow: 0 10px 40px rgba(0,0,0,0.7);
            text-align: center;
        }

        h1 {
            margin: 0;
            font-family: 'Chomsky', serif;
            font-size: clamp(2.2rem, 5vw, 3.3rem);
            font-weight: normal;
            letter-spacing: -1px;
            color: #fff;
            text-shadow: 0 1px 3px rgba(0,0,0,0.35);
        }

        .subtitle {
            margin-top: 0.2rem;
            font-size: 0.9rem;
            color: var(--muted);
        }

        .back-link {
            display: inline-block;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
            color: var(--muted);
            text-decoration: none;
        }

        .back-link:hover {
            text-decoration: underline;
        }

        /* Cryptid navigation bar (same vibe as home) */
        .nav-menu {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 1rem;
            padding: 0.65rem 1rem 1rem;
            margin: 0 auto;
            max-width: 1000px;
            background: radial-gradient(circle at top, rgba(15,23,42,0.95), rgba(15,23,42,0.85));
            border-radius: 0 0 1.25rem 1.25rem;
            border: 1px solid var(--card-border);
            border-top: none;
            box-shadow: 0 12px 40px rgba(0,0,0,0.75);
        }

        .menu-item {
            position: relative;
            width: 90px;
            padding-top: 60px;
            text-align: center;
            color: var(--text);
            font-size: 0.8rem;
            text-decoration: none;
        }

        .menu-label {
            margin-top: 0.15rem;
            display: block;
            font-family: "Chomsky", serif;
            font-size: 0.9rem;
        }

        .sprite {
            width: 56px;
            height: 56px;
            margin: 0 auto 0.2rem;
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat;
            image-rendering: pixelated;
            filter: drop-shadow(0 2px 6px rgba(0,0,0,0.9));
            transform: translateY(0) scale(1);
            will-change: transform;
        }

        .sprite-alien {
            background-image: url("../sprites/Alien.png");
        }

        .sprite-bigfoot {
            background-image: url("../sprites/Bigfoot.png");
        }

        .sprite-mothman {
            background-image: url("../sprites/Mothman.png");
        }

        .sprite-chupacabra {
            background-image: url("../sprites/Chupacabra.png");
        }

        .sprite-devil {
            background-image: url("../sprites/Devil.png");
        }

        .sprite-cthulu {
            background-image: url("../sprites/Cthulu.png");
        }

        .ufo {
            position: absolute;
            top: 0;
            left: 50%;
            width: 52px;
            height: 52px;
            transform: translateX(-50%) translateY(10px) scale(0.85);
            background-image: url("../sprites/UFO.png");
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease-out, transform 0.2s ease-out;
            filter: drop-shadow(0 4px 10px rgba(0,0,0,0.9));
        }

        .beam {
            position: absolute;
            top: 32px;
            left: 50%;
            width: 40px;
            height: 80%;
            transform: translateX(-50%);
            background: radial-gradient(circle at top, rgba(248,250,252,0.9) 0, rgba(224,242,254,0.7) 20%, rgba(96,165,250,0.25) 50%, transparent 75%);
            clip-path: polygon(50% 0, 0 100%, 100% 100%);
            opacity: 0;
            mix-blend-mode: screen;
            transition: opacity 0.2s ease-out;
        }

        @keyframes sprite-bob {
            0% {
                transform: translateY(-2px) scale(1.03);
            }

            100% {
                transform: translateY(-10px) scale(1.08);
            }
        }

        .menu-item:hover .ufo,
        .menu-item:focus-visible .ufo {
            opacity: 1;
            transform: translateX(-50%) translateY(0) scale(1);
        }

        .menu-item:hover .beam,
        .menu-item:focus-visible .beam {
            opacity: 1;
        }

        .menu-item:hover .sprite,
        .menu-item:focus-visible .sprite {
            animation: sprite-bob 0.6s ease-in-out infinite alternate;
        }

        /* Main layout */
        main {
            max-width: 1152px;
            margin: 1.75rem auto 0;
            padding: 0 1.25rem 5vh; /* extra scroll room for wallpaper */
            position: relative;
        }

        /* TV wrapper */
        .tv-wrapper {
            position: relative;
            width: 100%;
            height: calc(768px * 0.75); /* approximate visible area; adjust as desired */
            max-width: 1152px;
            margin: 0 auto;
        }

        /* TV 'screen' area where content sits */
        .tv-screen {
            position: absolute;
            /* tuned for ~1152x768 BroGarf; adjust if needed */
            top: 19%;
            left: 18%;
            width: 36%;
            height: 48%;
            background: radial-gradient(circle at 10% 0%, #111827 0, #020617 40%, #020617 100%);
            border-radius: 10px;
            box-shadow: inset 0 0 18px rgba(0,0,0,0.9);
            padding: 0.5rem 0.7rem;
            overflow: hidden; /* inner content manages its own scrolling */
            color: #e5e7eb;
            font-size: 0.78rem;
            line-height: 1.4;
        }

        /* Democracy Now! block inside TV */
        #dn-wrapper {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 0.1rem 0;
            color: #e5e7eb;
            font-size: 0.9rem;
        }

        .dn-title {
            margin: 0 0 0.1rem;
            font-family: 'Chomsky', serif;
            font-size: 0.9rem;
            text-align: center;
        }

        .dn-note {
            margin: 0 0 0.3rem;
            font-size: 0.7rem;
            color: #cbd5e1;
            text-align: center;
        }

        .dn-video-shell {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            background: radial-gradient(circle at center, #111827, #020617);
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow:
                0 0 10px rgba(15,23,42,0.8),
                0 0 20px rgba(0,0,0,0.8);
            margin-bottom: 0.3rem;
        }

        .dn-episodes-list {
            flex: 1;
            overflow-y: auto;
            margin-top: 0.15rem;
            padding-right: 0.25rem;
        }

        .dn-episode {
            display: flex;
            gap: 0.5rem;
            padding: 0.3rem 0.4rem;
            border-radius: 0.4rem;
            background: rgba(15,23,42,0.75);
            border: 1px solid rgba(148,163,184,0.45);
            margin-bottom: 0.25rem;
            cursor: pointer;
            transition: background 0.15s ease-out, transform 0.1s ease-out, box-shadow 0.15s ease-out;
        }

        .dn-episode:hover {
            background: rgba(30,64,175,0.85);
            transform: translateY(-1px);
            box-shadow: 0 0 10px rgba(37,99,235,0.7);
        }

        .dn-thumb {
            width: 60px;
            height: 34px;
            border-radius: 0.25rem;
            object-fit: cover;
            flex-shrink: 0;
        }

        .dn-ep-main {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .dn-ep-title {
            font-size: 0.78rem;
            font-weight: 600;
            margin: 0 0 0.05rem;
            color: #e5e7eb;
        }

        .dn-ep-meta {
            font-size: 0.7rem;
            color: #9ca3af;
        }

        .dn-status {
            margin-top: 0.15rem;
            font-size: 0.65rem;
            color: #9ca3af;
            text-align: center;
        }

        footer {
            margin-top: 1.5rem;
            font-size: 0.75rem;
            color: var(--muted);
            text-align: center;
        }

        @media (max-width: 900px) {
            main {
                padding-bottom: 50vh;
            }

            .tv-wrapper {
                height: auto;
                aspect-ratio: 3 / 2; /* approximate */
            }

            .tv-screen {
                top: 22%;
                left: 16%;
                width: 40%;
                height: 52%;
            }

            .dn-title {
                font-size: 0.8rem;
            }
        }
    </style>
</head>

<body>

<header>
    <div class="top-bar">
        <a href="../index.html" class="back-link">← Back to Bienvenido</a>

        <div class="banner">
            <h1>What is up Foo!?</h1>
            <div class="subtitle">Fake News Network · Broadcast live from your brain worms.</div>
        </div>

        <!-- Nav bar with cryptid sprites -->
        <nav class="nav-menu" aria-label="Main menu">

            <a class="menu-item" href="/Talk2Me/">
                <div class="ufo"></div>
                <div class="beam"></div>
                <div class="sprite sprite-alien"></div>
                <span class="menu-label">Make Contact</span>
            </a>

            <a class="menu-item" href="/Conspiracies/">
                <div class="ufo"></div>
                <div class="beam"></div>
                <div class="sprite sprite-bigfoot"></div>
                <span class="menu-label">Conspiracies</span>
            </a>

            <a class="menu-item" href="/fake-news/">
                <div class="ufo"></div>
                <div class="beam"></div>
                <div class="sprite sprite-mothman"></div>
                <span class="menu-label">News</span>
            </a>

            <a class="menu-item" href="/Revistas/">
                <div class="ufo"></div>
                <div class="beam"></div>
                <div class="sprite sprite-chupacabra"></div>
                <span class="menu-label">ChupaYCome</span>
            </a>

            <a class="menu-item" href="/hells-kitchen/">
                <div class="ufo"></div>
                <div class="beam"></div>
                <div class="sprite sprite-devil"></div>
                <span class="menu-label">Hell's Kitchen</span>
            </a>

            <a class="menu-item" href="/blog/">
                <div class="ufo"></div>
                <div class="beam"></div>
                <div class="sprite sprite-cthulu"></div>
                <span class="menu-label">Literary Nightmares</span>
            </a>

        </nav>

    </div>
</header>

<main>
    <div class="tv-wrapper">
        <!-- This sits over the TV's empty space -->
        <div class="tv-screen" id="tvFeed">
            <div id="dn-wrapper">
                <h2 class="dn-title">Democracy Now! — Video Feed</h2>
                <p class="dn-note">
                    Latest full shows from Democracy Now!<br>
                    <strong>Note:</strong> Loading & playing videos will contact democracynow.org and their media host.
                </p>

                <!-- Video player in the TV -->
                <div class="dn-video-shell">
                    <video id="dnVideo" controls preload="metadata" poster="" style="width:100%; height:100%;">
                        Your browser does not support the video tag.
                    </video>
                </div>

                <!-- Scrollable list of recent episodes -->
                <div id="dnEpisodes" class="dn-episodes-list">
                    <!-- Episodes will be injected here -->
                </div>

                <div id="dnStatus" class="dn-status"></div>
            </div>
        </div>
    </div>
</main>

<footer>
    © <span id="year"></span> Fake News Network — All opinions are hallucinations.
</footer>

<script>
    document.getElementById("year").textContent = new Date().getFullYear();
</script>

<script>
  const DN_FEED_URL = 'https://www.democracynow.org/podcast-video.xml';
  const DN_MAX_EPISODES = 8; // how many to show in the list

  const dnVideoEl = document.getElementById('dnVideo');
  const dnEpisodesEl = document.getElementById('dnEpisodes');
  const dnStatusEl = document.getElementById('dnStatus');

  async function loadDemocracyNowFeed() {
    try {
      dnStatusEl.textContent = 'Fetching Democracy Now! episodes…';

      const res = await fetch(DN_FEED_URL);
      if (!res.ok) {
        throw new Error('Network response was not OK');
      }

      const xmlText = await res.text();
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(xmlText, 'application/xml');

      const itemNodes = Array.from(xmlDoc.querySelectorAll('channel > item'));
      if (!itemNodes.length) {
        dnStatusEl.textContent = 'No episodes found in the feed.';
        return;
      }

      const episodes = itemNodes.slice(0, DN_MAX_EPISODES).map(item => {
        const titleNode = item.querySelector('title');
        const dateNode = item.querySelector('pubDate');
        const enclosure = item.querySelector('enclosure[url]');

        // Try to get a thumbnail if present (media:thumbnail)
        let thumbUrl = '';
        const thumbNode = item.querySelector('media\\:thumbnail, thumbnail');
        if (thumbNode && thumbNode.getAttribute('url')) {
          thumbUrl = thumbNode.getAttribute('url');
        }

        return {
          title: titleNode ? titleNode.textContent.trim() : 'Untitled episode',
          pubDate: dateNode ? dateNode.textContent.trim() : '',
          videoUrl: enclosure ? enclosure.getAttribute('url') : '',
          thumbUrl
        };
      }).filter(ep => ep.videoUrl);

      if (!episodes.length) {
        dnStatusEl.textContent = 'No playable video episodes found.';
        return;
      }

      // Set initial video to the first episode
      setDemocracyNowVideo(episodes[0]);
      renderDemocracyNowList(episodes);
      dnStatusEl.textContent = `Loaded ${episodes.length} Democracy Now! video episodes.`;
    } catch (err) {
      console.error('Error loading Democracy Now feed:', err);
      dnStatusEl.textContent =
        'Could not load Democracy Now! feed. (Possibly blocked by CORS or network issues.)';
    }
  }

  function setDemocracyNowVideo(episode) {
    if (!episode.videoUrl) return;
    dnVideoEl.src = episode.videoUrl;

    if (episode.thumbUrl) {
      dnVideoEl.setAttribute('poster', episode.thumbUrl);
    } else {
      dnVideoEl.removeAttribute('poster');
    }
  }

  function renderDemocracyNowList(episodes) {
    dnEpisodesEl.innerHTML = '';

    episodes.forEach(ep => {
      const row = document.createElement('div');
      row.className = 'dn-episode';

      if (ep.thumbUrl) {
        const img = document.createElement('img');
        img.src = ep.thumbUrl;
        img.alt = ep.title;
        img.className = 'dn-thumb';
        row.appendChild(img);
      }

      const main = document.createElement('div');
      main.className = 'dn-ep-main';

      const titleEl = document.createElement('div');
      titleEl.className = 'dn-ep-title';
      titleEl.textContent = ep.title;

      const metaEl = document.createElement('div');
      metaEl.className = 'dn-ep-meta';
      metaEl.textContent = formatDemocracyNowDate(ep.pubDate);

      main.appendChild(titleEl);
      main.appendChild(metaEl);
      row.appendChild(main);

      row.addEventListener('click', () => {
        setDemocracyNowVideo(ep);
        dnVideoEl.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      });

      dnEpisodesEl.appendChild(row);
    });
  }

  function formatDemocracyNowDate(pubDateStr) {
    if (!pubDateStr) return '';
    const d = new Date(pubDateStr);
    if (isNaN(d.getTime())) return pubDateStr;

    const options = { year: 'numeric', month: 'short', day: 'numeric' };
    return d.toLocaleDateString(undefined, options);
  }

  // Kick it off
  loadDemocracyNowFeed();
</script>

</body>
</html>
